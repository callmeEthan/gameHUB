[Rainmeter]
OnRefreshAction=[!ActivateConfig "GameHUB\Wallpaper" "backgroundS.ini"][!Delay 500][!ActivateConfig "GameHUB\Controller" "Controller.ini"][!ActivateConfig "GameHUB\Bottom" "Controller.ini"][!EnableMeasure "SmoothTransition"]
Update=20
SkinWidth=(#SkinWidth#*0.8)
SkinHeight=(#BannerHeight#*#Rows#+(#Rows#-1)*#Rowspace#)

RightMouseUpAction=!Execute [!SkinCustomMenu]
ContextTitle=Edit game
ContextAction=[!WriteKeyValue Variables Editing "[#Select]" "#@#Settings.inc"][!CommandMeasure Exit "Execute 1" "GameHUB"][!ActivateConfig "GameHUB\Wizard" "Name.ini"]
ContextTitle2=Game number
ContextAction2=[!WriteKeyValue Variables Editing "[#TotalGame]" "#@#Settings.inc"][!CommandMeasure Exit "Execute 1" "GameHUB"][!ActivateConfig "GameHUB\Wizard" "Panel.ini"]
ContextTitle3=Display mode
ContextAction3=[!WriteKeyValue Variables Editing "[#TotalGame]" "#@#Settings.inc"][!CommandMeasure Exit "Execute 1" "GameHUB"][!ActivateConfig "GameHUB\Wizard" "Mode.ini"]
ContextTitle4=---
ContextTitle5=Skin Menu
ContextAction5=[!SkinMenu]

[Metadata]
Name=Game Drawer
Author=FinchNelson
Information=Game Launcher inspired with Spectrum theme, made with genuine personal interest
License=Creative Commons Attribution-Non-Commercial-Share Alike 3.0
Version=Spectrum 1.3

[Variables]
@Include=#@#Gamelist.inc
@Include2=#@#Settings.inc
OffsetX=0
ScrollLimit=Min(#SkinWidth#,(#SkinWidth#*0.8)+(#Space#)*Ceil(#TotalGame#/#Rows#)*(-1))
Reset=1
Select=1
Shown=#BannerWidth#

Transition=-1
Delay=10
Title=0
Rows=1
Rowspace=10
Space=(#SkinWidth#*0.22)
BannerWidth=(#SkinWidth#*0.18)
BannerHeight=(#SkinHeight#*0.45)


[AutoScale]
Measure=Calc
IfCondition=(1=1)
IfTrueAction=[!ZPos 2][!Move "(#SkinX#+(#SkinWidth#*0.12))" "(#SkinY#+(#SkinHeight#*0.23))"]

[BackgroundTransition]
Measure=Calc
IfCondition=#Transition# > (-1)
IfTrueAction=[!SetVariable Transition "(#Transition#-1)"]
IfCondition2=(#Transition#=0)
IfTrueAction2=[!ActivateConfig "GameHUB\Wallpaper" "Game_#Select#.ini"][!SetVariable Transition "(-1)"]
DynamicVariables=1
IfConditionMode=1

[SmoothTransition]
Measure=Calc 
Disabled=1
Formula=(SmoothTransition-((SmoothTransition-#CURRENTCONFIGHEIGHT#)/4))
IfAboveValue=#CURRENTCONFIGHEIGHT#-1
IfAboveAction=[!PauseMeasure #CURRENTSECTION#]
DynamicVariables=1

[SmoothScroll]
Measure=Calc 
Formula=(SmoothScroll-((SmoothScroll-#OffsetX#)/7))
DynamicVariables=1

[Background]
meter=Image
X=0
Y=0
W=#CURRENTCONFIGWIDTH#
H=#CURRENTCONFIGHEIGHT#
SolidColor=0,0,0,1
MouseScrollUpAction=[!SetVariable "OffsetX" "(Clamp(#OffsetX#-(#Space#),Min(20,#ScrollLimit#),20))"]
MouseScrollDownAction=[!SetVariable "OffsetX" "(Clamp(#OffsetX#+(#Space#),Min(20,#ScrollLimit#),20))"]
DynamicVariables=1

[GameIcon]
W=#BannerWidth#
H=#BannerHeight#
DynamicVariables=1
SolidColor=0,0,0,40
PreserveAspectRatio=1
ImageTint=#Color#

[GameCover]
Group=Cover
W=#BannerWidth#
H=#BannerHeight#
DynamicVariables=1
SolidColor=0,0,0,1
PreserveAspectRatio=0

[Highlight] 
Meter=Image 
ImageName=#@#Highlight.png
W=#BannerWidth#
H=#BannerHeight#
X=([SmoothScroll])+(#Space#)*Trunc((#Select#-1)/#Rows#) 
Y=(((#Select#-1)%#Rows#)*(#BannerHeight#+#Rowspace#))-[SmoothTransition]+#CURRENTCONFIGHEIGHT# 
ImageTint=#Color#
Hidden=1
DynamicVariables=1

[MeterBorder]
Meter=Shape
Shape=Rectangle ([SmoothScroll])+(#Space#)*Trunc((#Select#-1)/#Rows#) , (((#Select#-1)%#Rows#)*(#BannerHeight#+#Rowspace#))-[SmoothTransition]+#CURRENTCONFIGHEIGHT#+1 , #BannerWidth#, #BannerHeight#-2, 5 | Fill Color 0,0,0,0 | StrokeWidth 3 | Stroke Color #Color#,10
Hidden=1
DynamicVariables=1

[GameTitle]
Meter=String
FontSize=25
FontColor=255,255,255
FontFace=#Font#
AntiAlias=1
StringAlign=CenterCenter
DynamicVariables=1

[UP]
Measure=Plugin
Plugin=HotKey
HotKey=UP
KeyDownAction=[!CommandMeasure InputNavigation "Execute 1"]
UpdateDivider=3
[DOWN]
Measure=Plugin
Plugin=HotKey
HotKey=DOWN
KeyDownAction=[!CommandMeasure InputNavigation "Execute 2"]
UpdateDivider=3
[RIGHT]
Measure=Plugin
Plugin=HotKey
HotKey=RIGHT
KeyDownAction=[!CommandMeasure InputNavigation "Execute 4"]
DynamicVariables=1
[LEFT]
Measure=Plugin
Plugin=HotKey
HotKey=LEFT
KeyDownAction=[!CommandMeasure InputNavigation "Execute 3"]
DynamicVariables=1
[ENTER]
Measure=Plugin
Plugin=HotKey
HotKey=ENTER
KeyDownAction=[!CommandMeasure InputExecute "Execute #Select#"]
DynamicVariables=1
UpdateDivider=3
[ESCAPE]
Measure=Plugin
Plugin=HotKey
HotKey=ESCAPE
KeyDownAction=[!CommandMeasure Exit "Execute 1"]
UpdateDivider=3

[measureXInput_0_Dpad_L]
Measure=Plugin
Plugin=XInput
Device=0
Channel=Dpad_L
IfEqualValue=1
IfEqualAction=[!CommandMeasure InputNavigation "Execute 3"]
DynamicVariables=1
[measureXInput_0_Dpad_R]
Measure=Plugin
Plugin=XInput
Device=0
Channel=Dpad_R
IfEqualValue=1
IfEqualAction=[!CommandMeasure InputNavigation "Execute 4"]
DynamicVariables=1
[measureXInput_0_Dpad_U]
Measure=Plugin
Plugin=XInput
Device=0
Channel=Dpad_U
IfEqualValue=1
IfEqualAction=[!CommandMeasure InputNavigation "Execute 1"]
[measureXInput_0_Dpad_D]
Measure=Plugin
Plugin=XInput
Device=0
Channel=Dpad_D
IfEqualValue=1
IfEqualAction=[!CommandMeasure InputNavigation "Execute 2"]
[measureXInput_0_Face_D]
Measure=Plugin
Plugin=XInput
Device=0
Channel=Face_D
IfEqualValue=1
IfEqualAction=[!CommandMeasure InputExecute "Execute #Select#"]
DynamicVariables=1
[measureXInput_0_Face_R]
Measure=Plugin
Plugin=XInput
Device=0
Channel=Face_R
IfEqualValue=1
IfEqualAction=[!CommandMeasure Exit "Execute 1"]

[InputNavigation]
Measure=Plugin
Plugin=ActionTimer
DynamicVariables=1
ActionList1=Up
ActionList2=Down
ActionList3=Left
ActionList4=Right
Up=!Execute [!SetVariable Select "((#Select#-1)%#Rows#=0 ? #Select# : #Select#-1)"][!EnableMeasure InputCheck][!UpdateMeasure InputCheck]
Down=!Execute [!SetVariable Select "(#Select#%#Rows#=0 ? #Select# : #Select#+1)"][!EnableMeasure InputCheck][!UpdateMeasure InputCheck]
Left=!Execute [!SetVariable Select "(#Select#-#Rows#<1 ? #Select# : #Select#-#Rows#)"][!EnableMeasure InputCheck][!UpdateMeasure InputCheck]
Right=!Execute [!SetVariable Select "(#Select#+#Rows#>#TotalGame# ? #Select# : #Select#+#Rows#)"][!EnableMeasure InputCheck][!UpdateMeasure InputCheck]

[Exit]
Measure=Plugin
Plugin=ActionTimer
DynamicVariables=1
ActionList1=Deactivate
Deactivate=[!DeactivateConfig "GameHUB"][!DeactivateConfig "GameHUB\Controller"][!DeactivateConfig "GameHUB\Wallpaper"][!DeactivateConfig "GameHUB\Bottom"][!SetVariable Transition "(-1)"][!DisableMeasure "BackgroundTransition"]


@Include3=#@#SpectrumCover.inc
