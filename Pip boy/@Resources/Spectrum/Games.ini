[Rainmeter]
OnRefreshAction=[!ZPos 2][!SetVariable "Tab" "2" "Pip boy\Wallpaper"][!SetVariable "Tab" "2" "Pip boy\Bottom"][!Update "Pip boy\Wallpaper"][!Delay 500][!EnableMeasure "SmoothTransition"]
Update=20
SkinWidth=(#SkinWidth#*0.8)
SkinHeight=(#BannerHeight#*#Rows#+(#Rows#-1)*#Rowspace#)

[Metadata]
Name=Game Drawer
Author=FinchNelson
Information=Legacy skin, replace active games.ini skin if you want scrolling spectrum skin instead.
License=Creative Commons Attribution-Non-Commercial-Share Alike 3.0
Version=Spectrum 1.3

[Variables]
@Include=#@#Gamelist.inc
@Include2=#@#Settings.inc
OffsetX=0
ScrollLimit=Min(#SkinWidth#,(#SkinWidth#*0.8)+(#Space#)*Ceil(#TotalGame#/#Rows#)*(-1))
Reset=1
Select=1
Shown=#BannerWidth#

Title=0
Rows=4
Rowspace=10
Space=(#SkinWidth#*0.2)
BannerWidth=(#SkinWidth#*0.18)
BannerHeight=(#SkinHeight#*0.15)


[AutoScale]
Measure=Calc
IfCondition=(1=1)
IfTrueAction=[!Move "(#SkinX#+(#SkinWidth#*0.12))" "(#SkinY#+(#SkinHeight#*0.23))"]

[SmoothTransition]
Measure=Calc 
Disabled=1
Formula=(SmoothTransition-((SmoothTransition-#CURRENTCONFIGHEIGHT#)/2))
IfAboveValue=#CURRENTCONFIGHEIGHT#-1
IfAboveAction=[!PauseMeasure #CURRENTSECTION#]
DynamicVariables=1

[SmoothScroll]
Measure=Calc 
Formula=(SmoothScroll-((SmoothScroll-#OffsetX#)/2))
DynamicVariables=1

[Background]
meter=Image
X=0
Y=0
W=#CURRENTCONFIGWIDTH#
H=#CURRENTCONFIGHEIGHT#
SolidColor=0,0,0,1
MouseScrollUpAction=[!SetVariable "OffsetX" "(Clamp(#OffsetX#-(#Space#),Min(20,#ScrollLimit#),20))"]
MouseScrollDownAction=[!SetVariable "OffsetX" "(Clamp(#OffsetX#+(#Space#),Min(20,#ScrollLimit#),20))"]
DynamicVariables=1

[GameIcon]
Group=Icon
W=#BannerWidth#
H=#BannerHeight#
DynamicVariables=1
SolidColor=0,0,0,30
PreserveAspectRatio=1
ImageTint=#Color#
MaskImagePath=#@#\Spectrum

[GameCover]
Group=Cover
W=#BannerWidth#
H=#BannerHeight#
DynamicVariables=1
SolidColor=0,0,0,1
PreserveAspectRatio=0

[GameTitle]
Meter=String
FontSize=25
FontColor=#Color#
FontFace=#Font#
AntiAlias=1
StringAlign=CenterCenter
DynamicVariables=1

[UP]
Measure=Plugin
Plugin=HotKey
HotKey=UP
KeyDownAction=[!CommandMeasure InputNavigation "Execute 1"]
UpdateDivider=3
[DOWN]
Measure=Plugin
Plugin=HotKey
HotKey=DOWN
KeyDownAction=[!CommandMeasure InputNavigation "Execute 2"]
UpdateDivider=3
[RIGHT]
Measure=Plugin
Plugin=HotKey
HotKey=RIGHT
KeyDownAction=[!CommandMeasure InputNavigation "Execute 4"]
DynamicVariables=1
[LEFT]
Measure=Plugin
Plugin=HotKey
HotKey=LEFT
KeyDownAction=[!CommandMeasure InputNavigation "Execute 3"]
DynamicVariables=1
[ENTER]
Measure=Plugin
Plugin=HotKey
HotKey=ENTER
KeyDownAction=[!CommandMeasure InputExecute "Execute #Select#"]
DynamicVariables=1
UpdateDivider=3

[measureXInput_0_Dpad_L]
Measure=Plugin
Plugin=XInput
Device=0
Channel=Dpad_L
IfEqualValue=1
IfEqualAction=[!CommandMeasure InputNavigation "Execute 3"]
DynamicVariables=1
[measureXInput_0_Dpad_R]
Measure=Plugin
Plugin=XInput
Device=0
Channel=Dpad_R
IfEqualValue=1
IfEqualAction=[!CommandMeasure InputNavigation "Execute 4"]
DynamicVariables=1
[measureXInput_0_Dpad_U]
Measure=Plugin
Plugin=XInput
Device=0
Channel=Dpad_U
IfEqualValue=1
IfEqualAction=[!CommandMeasure InputNavigation "Execute 1"]
[measureXInput_0_Dpad_D]
Measure=Plugin
Plugin=XInput
Device=0
Channel=Dpad_D
IfEqualValue=1
IfEqualAction=[!CommandMeasure InputNavigation "Execute 2"]
[measureXInput_0_Face_D]
Measure=Plugin
Plugin=XInput
Device=0
Channel=Face_D
IfEqualValue=1
IfEqualAction=[!CommandMeasure InputExecute "Execute #Select#"]
DynamicVariables=1

[InputNavigation]
Measure=Plugin
Plugin=ActionTimer
DynamicVariables=1
ActionList1=Up
ActionList2=Down
ActionList3=Left
ActionList4=Right
Up=!Execute [!SetVariable Select "((#Select#-1)%#Rows#=0 ? #Select# : Max(1,#Select#-1))"][!EnableMeasure InputCheck][!UpdateMeasure InputCheck]
Down=!Execute [!SetVariable Select "(#Select#%#Rows#=0 ? #Select# : Min(#TotalGame#,#Select#+1))"][!EnableMeasure InputCheck][!UpdateMeasure InputCheck]
Left=!Execute [!SetVariable Select "(#Select#-#Rows#<1 ? #Select# : #Select#-#Rows#)"][!EnableMeasure InputCheck][!UpdateMeasure InputCheck]
Right=!Execute [!SetVariable Select "(#Select#+#Rows#>#TotalGame# ? #Select# : #Select#+#Rows#)"][!EnableMeasure InputCheck][!UpdateMeasure InputCheck]

[InputCheck]
Measure=Calc
DynamicVariables=1
Disabled=1
UpdateDivider=-1
IfCondition=(#Select#=1)
IfTrueAction=[Play "#@#Sounds\Hover.wav"][!SetOptionGroup "Icon" "SolidColor" "0,0,0,30"][!SetOptionGroup "Icon" "ImageTint" "#Color#"][!SetOption Game1 ImageTint "0,0,0,255"][!SetOption Game1 SolidColor "#Color#"][!SetVariable "OffsetX" "(#OffsetX#<20 ? 20 : #OffsetX#)"]
IfCondition2=(#Select#>1)
IfTrueAction2=[Play "#@#Sounds\Hover.wav"][!SetOptionGroup "Icon" "SolidColor" "0,0,0,30"][!SetOptionGroup "Icon" "ImageTint" "#Color#"][!SetOption Game#Select# ImageTint "0,0,0,255"][!SetOption Game#Select# SolidColor "#Color#"][!SetVariable "OffsetX" "(#OffsetX#<(-#Space#*(Floor((#Select#-1)/#Rows#))+#Shown#) ? Min(-#Space#*Trunc((#Select#-1)/#Rows#)+#Shown#,20) : (#OffsetX#>(-#Space#*(Trunc((#Select#-1)/#Rows#))+#CURRENTCONFIGWIDTH#-#Shown#*2) ? Max(-#Space#*(Trunc((#Select#-1)/#Rows#))+#CURRENTCONFIGWIDTH#-#Shown#*2,#ScrollLimit#) : #OffsetX#))"]
IfConditionMode=1

[TotalGameCheck]
Measure=Calc
Formula=TotalGameCheck+1
IfConditionMode=1
DynamicVariables=1
IfCondition=(TotalGameCheck>#TotalGame#)
IfTrueAction=[!HideMeter "Game[TotalGameCheck]"]
IfCondition2=(TotalGameCheck>#TotalGame#) || (#Title#=0)
IfTrueAction2=[!HideMeter "GameTitle[TotalGameCheck]"]
IfCondition3=(TotalGameCheck=20)
IfTrueAction3=[!DisableMeasure #CURRENTSECTION#"]

[InputExecute]
Measure=Plugin
Plugin=ActionTimer
DynamicVariables=1
ActionList1=Select1|Deactivate
ActionList2=Select2|Deactivate
ActionList3=Select3|Deactivate
ActionList4=Select4|Deactivate
ActionList5=Select5|Deactivate
ActionList6=Select6|Deactivate
ActionList7=Select7|Deactivate
ActionList8=Select8|Deactivate
ActionList9=Select9|Deactivate
ActionList10=Select10|Deactivate
ActionList11=Select11|Deactivate
ActionList12=Select12|Deactivate
ActionList13=Select13|Deactivate
ActionList14=Select14|Deactivate
ActionList15=Select15|Deactivate
ActionList16=Select16|Deactivate
ActionList17=Select17|Deactivate
ActionList18=Select18|Deactivate
ActionList19=Select19|Deactivate
ActionList20=Select20|Deactivate
ActionList21=Deactivate
Select1=!Execute [Play "#@#Sounds\Launch.wav"]["#Gamedir1#"]
Select2=!Execute [Play "#@#Sounds\Launch.wav"]["#Gamedir2#"]
Select3=!Execute [Play "#@#Sounds\Launch.wav"]["#Gamedir3#"]
Select4=!Execute [Play "#@#Sounds\Launch.wav"]["#Gamedir4#"]
Select5=!Execute [Play "#@#Sounds\Launch.wav"]["#Gamedir5#"]
Select6=!Execute [Play "#@#Sounds\Launch.wav"]["#Gamedir6#"]
Select7=!Execute [Play "#@#Sounds\Launch.wav"]["#Gamedir7#"]
Select8=!Execute [Play "#@#Sounds\Launch.wav"]["#Gamedir8#"]
Select9=!Execute [Play "#@#Sounds\Launch.wav"]["#Gamedir9#"]
Select10=!Execute [Play "#@#Sounds\Launch.wav"]["#Gamedir10#"]
Select11=!Execute [Play "#@#Sounds\Launch.wav"]["#Gamedir11#"]
Select12=!Execute [Play "#@#Sounds\Launch.wav"]["#Gamedir12#"]
Select13=!Execute [Play "#@#Sounds\Launch.wav"]["#Gamedir13#"]
Select14=!Execute [Play "#@#Sounds\Launch.wav"]["#Gamedir14#"]
Select15=!Execute [Play "#@#Sounds\Launch.wav"]["#Gamedir15#"]
Select16=!Execute [Play "#@#Sounds\Launch.wav"]["#Gamedir16#"]
Select17=!Execute [Play "#@#Sounds\Launch.wav"]["#Gamedir17#"]
Select18=!Execute [Play "#@#Sounds\Launch.wav"]["#Gamedir18#"]
Select19=!Execute [Play "#@#Sounds\Launch.wav"]["#Gamedir19#"]
Select20=!Execute [Play "#@#Sounds\Launch.wav"]["#Gamedir20#"]
Deactivate=[!DeactivateConfig "Pip boy"][!DeactivateConfig "Pip boy\Controller"][!DeactivateConfig "Pip boy\Wallpaper"][!DeactivateConfig "Pip boy\Bottom"]


@Include3=#@#SpectrumCover.inc